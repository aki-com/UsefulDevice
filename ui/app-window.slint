import { Device } from "device_search.slint";
import { Button, StandardButton ,VerticalBox, ListView, HorizontalBox, Slider, TabWidget} from "std-widgets.slint";


export global App_Data {
    in-out property <[Device]> devices:
        [
            { device_name: "Device1", IP_address: "i"},
            { device_name: "Device2", IP_address: "e"},
            { device_name: "Device3", IP_address: "e"},
            { device_name: "Device4", IP_address: "e"},
            { device_name: "Device5", IP_address: "e"},
            ];
}


export component AppWindow inherits Window {
    callback list_update();
    callback server_connecting(Device);
    callback cmd_send(string);

    in-out property <length> Square_size: (root.width > root.height) ? root.height : root.width;
    in-out property <[Device]> devices;
    preferred-width: 100%;
    preferred-height: 100%;
    min-height: 600px;
    min-width: 300px;
    TabWidget {
        Tab {
            VerticalBox {
                alignment: center;

                    HorizontalBox {
                        alignment: center;
                        height: Square_size * 0.25;
                        Button {
                            text: "T M";
                            width: Square_size * 0.25;
            
                            clicked => {
                                root.cmd_send("ctrl+Shift+Esc");
                            }
                        }
                        Button {
                            text: "Explorer";
                            width: Square_size * 0.25;
                        
                            clicked => {
                                root.cmd_send("win+e");
                            }
                        }
                        Button {
                            text: "Prt Sc";
                            width: Square_size * 0.25;
            
            
                            clicked => {
                                root.cmd_send("Prtsc");
                            }
                        }
                    }
                    HorizontalBox {
                        alignment: center;
                        height: Square_size * 0.25;
                        Button {
                            text: "Ctrl+S";
                            width: Square_size * 0.25;
                            
                            clicked => {
                                root.cmd_send("Ctrl+s");
                            }
                        }
                        Button {
                            text: "Ctrl+P";
                            width: Square_size * 0.25;
                            
                            clicked => {
                                root.cmd_send("Ctrl+p");
                            }
                        }
                        Button {
                            text: "win+i";
                            width: Square_size * 0.25;
                            
                            clicked => {
                                root.cmd_send("win+i");
                            }
                        }
                    }
                    HorizontalBox {
                        alignment: center;
                        height: Square_size * 0.25;
                        Button {
                            text: "Copy";
                            width: Square_size * 0.25;
                            
                            clicked => {
                                root.cmd_send("Ctrl+c");            
                            }
                        }
                        Button {
                            text: "Paste";
                            width: Square_size * 0.25;
                            
                            clicked => {
                                root.cmd_send("Ctrl+v");
                            }
                        }
                        Button {
                            text: "Ctrl+A";
                            width: Square_size * 0.25;
                            
                            clicked => {
                                root.cmd_send("Ctrl+a");
                            }
                        }
                    }   
                    HorizontalBox {
                        alignment: center;
                        Button {
                            text: "mute";
                            width: Square_size * 0.25;

                            clicked => {
                                root.cmd_send("mute");
                            }

                        }
                        Slider {
                            width: Square_size * 0.5;
                            height: 20px;
                            maximum: 1;
                            minimum: 0;
                            released(position) => {
                                root.cmd_send("volume " + position);
                            }
                        }
                    
                }
            }
        }

        Tab {
            HorizontalBox {
                ListView {
                    for data in devices: Rectangle {
                        preferred-height: 50px;
                        preferred-width: 100%;
                        Button {
                            width: 100%;
                            text: data.device_name + "                " + data.IP_address;
                            clicked => {
                                root.server_connecting(data);
                            }
        
        
                        }
                    }
        
                }
                Button {
                    text: "更新";
                    clicked => {
                        root.list_update();
                    }
                }
            }
        }
    }   
}
/*
export component device_search inherits Dialog {
    in-out property <[Device]> devices;
    callback list_update();

    preferred-width: 800px;
    preferred-height: 600px;
    min-height: 600px;
    min-width: 300px;

    HorizontalBox {
        ListView {
            for data in devices: Rectangle {
                preferred-height: 50px;
                preferred-width: 100%;
                Button {
                    width: 100%;
                    text: data.device_name + "                " + data.IP_address;
                    clicked => {}


                }
            }

        }
        Button {
            text: "更新";
            clicked => {
                root.list_update();
            }
        }
    }
}
*/